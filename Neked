-- by Neked

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

local Window = Rayfield:CreateWindow({
    Name = "GEF Script",
    LoadingTitle = "GEF ыы",
    LoadingSubtitle = "by Neked"
})

-- Player Tab
local Tab1 = Window:CreateTab("Player")

-- Inf Jump
Tab1:CreateToggle({
    Name = "Inf Jump",
    CurrentValue = false,
    Callback = function(Value)
        infJump = Value
        game:GetService("UserInputService").JumpRequest:Connect(function()
            if infJump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
            end
        end)
    end,
})

-- FullBright
Tab1:CreateToggle({
    Name = "FullBright",
    CurrentValue = false,
    Callback = function(Value)
        fullBright = Value
        task.spawn(function()
            while fullBright do
                game.Lighting.Brightness = 2
                game.Lighting.ClockTime = 12
                game.Lighting.FogEnd = 1e10
                game.Lighting.GlobalShadows = false
                game.Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
                task.wait(0.01)
            end
        end)
    end,
})

-- JumpPower
Tab1:CreateSlider({
    Name = "JumpPower",
    Range = {1,150},
    Increment = 1,
    CurrentValue = 50,
    Callback = function(Value)
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid").UseJumpPower = true
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid").JumpPower = Value
        end
    end,
})

-- TP Tool
Tab1:CreateButton({
    Name = "Выдать TP Tool",
    Callback = function()
        local tool = Instance.new("Tool")
        tool.RequiresHandle = false
        tool.Name = "TP Tool"
        tool.Activated:Connect(function()
            local mouse = LocalPlayer:GetMouse()
            if mouse and mouse.Hit then
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0,3,0))
                end
            end
        end)
        tool.Parent = LocalPlayer.Backpack
    end,
})

-- GodMode Button
Tab1:CreateButton({
    Name = "GodMode",
    Callback = function()
        task.spawn(function()
            while true do
                task.wait(0.001)
                local gefs = Workspace:FindFirstChild("GEFs")
                if gefs then
                    pcall(function() gefs:Destroy() end)
                end
                for _, obj in ipairs(Workspace:GetChildren()) do
                    if obj.Name == "GEF" then
                        pcall(function() obj:Destroy() end)
                    end
                end
            end
        end)
    end,
})

-- Items Tab
local Tab2 = Window:CreateTab("Items")
local itemsList = {"Bat","Crowbar","Food","Hammer","Handgun","Lantern","Medkit","Money","Shells","Soda","Bullets","GPS","Shotgun"}

for _, itemName in ipairs(itemsList) do
    Tab2:CreateButton({
        Name = "TP Random " .. itemName,
        Callback = function()
            if Workspace:FindFirstChild("Pickups") then
                local candidates = {}
                for _, v in pairs(Workspace.Pickups:GetChildren()) do
                    if v.Name == itemName then
                        table.insert(candidates, v)
                    end
                end
                if #candidates > 0 then
                    local target = candidates[math.random(1,#candidates)]
                    local pos
                    if target:IsA("Model") then
                        if target.PrimaryPart then
                            pos = target.PrimaryPart.Position
                        else
                            local part = target:FindFirstChildWhichIsA("BasePart")
                            if part then pos = part.Position end
                        end
                    elseif target:IsA("BasePart") then
                        pos = target.Position
                    end
                    if pos and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos + Vector3.new(0,3,0))
                    end
                else
                    Rayfield:Notify({
                        Title = "Ошибка",
                        Content = "На карте нету " .. itemName,
                        Duration = 3
                    })
                end
            end
        end,
    })
end

-- Money Tab
local Tab3 = Window:CreateTab("Money")

-- Auto Farm Money (0.0001s)
Tab3:CreateToggle({
    Name = "Auto Farm Money",
    CurrentValue = false,
    Callback = function(Value)
        autoFarm = Value
        if Value then
            task.spawn(function()
                while autoFarm do
                    if Workspace:FindFirstChild("Pickups") then
                        local moneyObjs = {}
                        for _, v in pairs(Workspace.Pickups:GetChildren()) do
                            if v.Name == "Money" then
                                table.insert(moneyObjs, v)
                            end
                        end
                        if #moneyObjs > 0 then
                            local target = moneyObjs[math.random(1,#moneyObjs)]
                            local pos
                            if target:IsA("Model") then
                                if target.PrimaryPart then
                                    pos = target.PrimaryPart.Position
                                else
                                    local part = target:FindFirstChildWhichIsA("BasePart")
                                    if part then pos = part.Position end
                                end
                            elseif target:IsA("BasePart") then
                                pos = target.Position
                            end
                            if pos and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos + Vector3.new(0,3,0))
                                -- instant ProximityPrompt spam
                                for _, prompt in ipairs(target:GetDescendants()) do
                                    if prompt:IsA("ProximityPrompt") then
                                        task.spawn(function()
                                            while autoFarm do
                                                pcall(function()
                                                    fireproximityprompt(prompt, 1)
                                                end)
                                                task.wait(0.0001)
                                            end
                                        end)
                                    end
                                end
                            end
                        else
                            Rayfield:Notify({
                                Title = "Предупреждение",
                                Content = "Если не телепортируется, то на локации нету денег",
                                Duration = 3
                            })
                        end
                    end
                    task.wait(0.0001)
                end
            end)
        end
    end,
})

-- TP To Random Money
Tab3:CreateButton({
    Name = "TP To Random Money",
    Callback = function()
        if Workspace:FindFirstChild("Pickups") then
            local moneyObjs = {}
            for _, v in pairs(Workspace.Pickups:GetChildren()) do
                if v.Name == "Money" then
                    table.insert(moneyObjs, v)
                end
            end
            if #moneyObjs > 0 then
                local target = moneyObjs[math.random(1,#moneyObjs)]
                local pos
                if target:IsA("Model") then
                    if target.PrimaryPart then
                        pos = target.PrimaryPart.Position
                    else
                        local part = target:FindFirstChildWhichIsA("BasePart")
                        if part then pos = part.Position end
                    end
                elseif target:IsA("BasePart") then
                    pos = target.Position
                end
                if pos and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(pos + Vector3.new(0,3,0))
                end
            else
                Rayfield:Notify({
                    Title = "Ошибка",
                    Content = "На карте нету Money",
                    Duration = 3
                })
            end
        end
    end,
})
